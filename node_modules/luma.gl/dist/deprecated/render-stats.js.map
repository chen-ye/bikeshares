{"version":3,"sources":["../../src/deprecated/render-stats.js"],"names":["PR","Math","round","window","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","Panel","name","fg","bg","canvas","document","createElement","width","height","style","cssText","context","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","dom","value","maxValue","min","max","drawImage","Stats","performance","mode","container","addEventListener","event","preventDefault","showPanel","children","length","beginTime","Date","now","prevTime","frames","fpsPanel","addPanel","msPanel","memory","memPanel","panel","appendChild","id","forEach","child","i","display","time","update","deltaTime","usedJSHeapSize","jsHeapSizeLimit","end","RendererStats","msDiv","msText","innerHTML","msTexts","nLines","lastTime","domElement","info","textContent","programs","geometries","textures","render","calls","vertices","faces","points"],"mappings":"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","file":"render-stats.js","sourcesContent":["/* eslint-disable */\n// An adaptation of the THREE.js stats helpers (MIT licensed)\n// https://github.com/mrdoob/stats.js\n// https://github.com/jeromeetienne/threex.rendererstats\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n/* global document, window */\nconst PR = Math.round(window.devicePixelRatio || 1);\n\nconst WIDTH = 80 * PR;\nconst HEIGHT = 48 * PR;\nconst TEXT_X = 3 * PR;\nconst TEXT_Y = 2 * PR;\nconst GRAPH_X = 3 * PR;\nconst GRAPH_Y = 15 * PR;\nconst GRAPH_WIDTH = 74 * PR;\nconst GRAPH_HEIGHT = 30 * PR;\n\nexport class Panel {\n\n  /* eslint-disable max-statements */\n  constructor(name, fg, bg) {\n    const canvas = document.createElement('canvas');\n    canvas.width = WIDTH;\n    canvas.height = HEIGHT;\n    canvas.style.cssText = 'width:80px;height:48px';\n\n    const context = canvas.getContext('2d');\n    context.font = `bold ${9 * PR}px Helvetica,Arial,sans-serif`;\n    context.textBaseline = 'top';\n\n    context.fillStyle = bg;\n    context.fillRect(0, 0, WIDTH, HEIGHT);\n\n    context.fillStyle = fg;\n    context.fillText(name, TEXT_X, TEXT_Y);\n    context.fillRect(GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT);\n\n    context.fillStyle = bg;\n    context.globalAlpha = 0.9;\n    context.fillRect(GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT);\n\n    this.name = name;\n    this.fg = fg;\n    this.bg = bg;\n    this.context = context;\n    this.dom = canvas;\n  }\n  /* eslint-enable max-statements */\n\n  update({value, maxValue}) {\n    const min = Math.min(min, value);\n    const max = Math.max(max, value);\n\n    this.context.fillStyle = this.bg;\n    this.context.globalAlpha = 1;\n    this.context.fillRect(0, 0, WIDTH, GRAPH_Y);\n    this.context.fillStyle = this.fg;\n\n    const round = Math.round;\n    this.context.fillText(\n      `${round(value)} ${this.name} (${round(min)}-${round(max)})`,\n      TEXT_X,\n      TEXT_Y\n    );\n\n    this.context.drawImage(\n      this.canvas,\n      GRAPH_X + PR, GRAPH_Y,\n      GRAPH_WIDTH - PR,\n      GRAPH_HEIGHT,\n      GRAPH_X,\n      GRAPH_Y,\n      GRAPH_WIDTH - PR,\n      GRAPH_HEIGHT\n    );\n\n    this.context.fillRect(\n      GRAPH_X + GRAPH_WIDTH - PR,\n      GRAPH_Y,\n      PR,\n      GRAPH_HEIGHT\n    );\n\n    this.context.fillStyle = this.bg;\n    this.context.globalAlpha = 0.9;\n    this.context.fillRect(\n      GRAPH_X + GRAPH_WIDTH - PR,\n      GRAPH_Y,\n      PR,\n      Math.round((1 - (value / maxValue)) * GRAPH_HEIGHT)\n    );\n  }\n}\n\nexport default class Stats {\n\n  constructor() {\n    this.performance = window.performance;\n\n    this.mode = 0;\n\n    const container = document.createElement('div');\n    container.style.cssText =\n      'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\n    container.addEventListener('click', event => {\n      event.preventDefault();\n      this.showPanel(++this.mode % this.container.children.length);\n    }, false);\n\n    //\n    this.beginTime = (this.performance || Date).now();\n    this.prevTime = this.beginTime;\n    this.frames = 0;\n\n    this.fpsPanel = this.addPanel(new Stats.Panel('FPS', '#0ff', '#002'));\n    this.msPanel = this.addPanel(new Stats.Panel('MS', '#0f0', '#020'));\n    if (this.performance && this.performance.memory) {\n      this.memPanel = this.addPanel(new Stats.Panel('MB', '#f08', '#201'));\n    }\n\n    this.showPanel(0);\n\n    this.dom = container;\n  }\n\n  addPanel(panel) {\n    this.container.appendChild(panel.dom);\n    return panel;\n\n  }\n\n  // Shows selected panel and hides all others\n  showPanel(id) {\n    this.container.children.forEach(\n      (child, i) => child.display = (i === id) ? 'block' : 'none'\n    );\n    this.mode = id;\n  }\n\n  setMode(id) {\n    this.showPanel(id);\n  }\n\n  beginFrame() {\n    this.beginTime = (this.performance || Date).now();\n  }\n\n  endFrame() {\n    this.frames++;\n\n    const time = (this.performance || Date).now();\n\n    this.msPanel.update(time - this.beginTime, 200);\n\n    const deltaTime = time - this.prevTime;\n    if (deltaTime > 1000) {\n      this.fpsPanel.update({\n        value: this.frames * deltaTime / 1000,\n        maxValue: 100\n      });\n\n      this.prevTime = time;\n      this.frames = 0;\n\n      if (this.memPanel) {\n        const memory = this.performance.memory;\n        this.memPanel.update({\n          value: memory.usedJSHeapSize / 1048576,\n          maxValue: memory.jsHeapSizeLimit / 1048576\n        });\n      }\n\n    }\n\n    return time;\n  }\n\n  update() {\n    this.beginTime = this.end();\n  }\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author jetienne / http://jetienne.com/\n */\n/** global document */\n\nexport class RendererStats {\n  /**\n   * Provide info on THREE.WebGLRenderer\n   *\n   * @param {Object} renderer the renderer to update\n   * @param {Object} Camera the camera to update\n  */\n  constructor() {\n    const container = document.createElement('div');\n    container.style.cssText = 'width:80px;opacity:0.9;cursor:pointer';\n\n    const msDiv = document.createElement('div');\n    msDiv.style.cssText = 'padding:0 0 3px 3px;text-align:left;backgound-color:#200;';\n    container.appendChild(msDiv);\n\n    const msText = document.createElement('div');\n    msText.style.cssText = 'color:#f00;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';\n    msText.innerHTML = 'Render Stats';\n    msDiv.appendChild(msText);\n\n    this.msTexts = [];\n    this.nLines = 9;\n    for (let i = 0; i < this.nLines; i++) {\n      this.msTexts[i] = document.createElement('div');\n      this.msTexts[i].style.cssText = 'color:#f00;background-color:#311;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';\n      this.msTexts[i].innerHTML = '-';\n      msDiv.appendChild(this.msTexts[i]);\n    }\n\n    this.lastTime = Date.now();\n    this.domElement = container;\n  }\n\n  update(info) {\n    // refresh only 30time per second\n    if (Date.now() - this.lastTime < 1000 / 30) {\n      return;\n    }\n    this.lastTime = Date.now();\n\n    let i = 0;\n    this.msTexts[i++].textContent = `== Memory ==`;\n    this.msTexts[i++].textContent = `Programs: ${info.memory.programs}`;\n    this.msTexts[i++].textContent = `Geometries: ${info.memory.geometries}`;\n    this.msTexts[i++].textContent = `Textures: ${info.memory.textures}`;\n\n    this.msTexts[i++].textContent = `== Render ==`;\n    this.msTexts[i++].textContent = `Calls: ${info.render.calls}`;\n    this.msTexts[i++].textContent = `Vertices: ${info.render.vertices}`;\n    this.msTexts[i++].textContent = `Faces: ${info.render.faces}`;\n    this.msTexts[i++].textContent = `Points: ${info.render.points}`;\n  }\n}\n"]}