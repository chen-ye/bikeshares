{"version":3,"sources":["../../src/webgl/vertex-attributes.js"],"names":["getMaxAttributes","hasDivisor","isEnabled","getBuffer","getGeneric","getSize","getType","isNormalized","isInteger","getStride","getOffset","enable","disable","setDivisor","getDivisor","setBuffer","setGeneric","setGenericValues","glGetLumaInfo","gl","luma","extensions","getExtension","getParameter","MAX_VERTEX_ATTRIBS","Boolean","location","get","VERTEX_ATTRIB_ARRAY_ENABLED","VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","CURRENT_VERTEX_ATTRIB","VERTEX_ATTRIB_ARRAY_SIZE","VERTEX_ATTRIB_ARRAY_TYPE","VERTEX_ATTRIB_ARRAY_NORMALIZED","VERTEX_ATTRIB_ARRAY_INTEGER","VERTEX_ATTRIB_ARRAY_STRIDE","pname","VERTEX_ATTRIB_ARRAY_POINTER","getVertexAttribOffset","getVertexAttrib","enableVertexAttribArray","disableVertexAttribArray","divisor","vertexAttribDivisor","ext","vertexAttribDivisorANGLE","Error","VERTEX_ATTRIB_ARRAY_DIVISOR","VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE","buffer","target","layout","undefined","bind","ARRAY_BUFFER","integer","vertexAttribPointer","size","type","normalized","stride","offset","vertexAttribIPointer","unbind","array","warn","Float32Array","vertexAttrib4fv","Int32Array","vertexAttribI4iv","Uint32Array","vertexAttribI4uiv","v0","v1","v2","v3","arguments","length","vertexAttrib1f","vertexAttrib2f","vertexAttrib3f","vertexAttrib4f"],"mappings":"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","file":"vertex-attributes.js","sourcesContent":["/* eslint-disable dot-notation*/\nimport {glGet} from './api';\nimport {assertWebGLContext, assertWebGL2Context, isWebGL2} from './context';\nimport {log} from '../utils';\nimport assert from 'assert';\n\n/**\n * Methods for manipulating the vertex attributes array, which is where\n * vertex data is staged for shader execution.\n *\n * Vertex attributes are stored in \"arrays\" with indices from 0 and up.\n * During shader execution, these indices (or 'locations') are matched to\n * the indices assigned to shader attributes during WebGLProgram linking.\n *\n * Note: The global state contains an implicit vertex attribute array which\n * the methods in this class manipulate by default. It is also possible to\n * create and bind a VertexArray to manage multiple arrays.\n *\n * Each vertex attribute has these properties:\n * - Can be enabled or disabled (Only enable attrs actually used by a program)\n * - Has an instance `divisor` (usually 1 or 0 to enable/disable instancing)\n * - Have a size (1-4 values per vertex)\n * - Has a value or values that is accessible in shaders\n *\n * Attribute values are either\n * - Generic: a constant value for all vertices/instances, or\n * - Bound to a WebGLBuffer with unique values for each vertex/instance\n *\n * When binding to a WebGLBuffer it is necessary to specify the layout of\n * data in the buffer:\n * - size (1-4 values per vertex)\n * - data type (e.g. gl.FLOAT)\n * - stride, offset, and integer normalization policy can also be specified\n *\n * Note: All methods in this class take a `location` index to specify which\n * vertex attribute in the array they are operating on.\n *\n * Note: Attribute 0 can sometimes be treated specially by the driver,\n * to be safe we avoid disabling it.\n *\n * Note: WebGL2\n * - Improves support for integer attributes, both generic and buffered.\n * - Setting instance \"divisors\" no longer require using a WebGL extension.\n *\n */\n\nfunction glGetLumaInfo(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.extensions = gl.luma.extensions || {};\n  gl.luma.extensions['ANGLE_instanced_arrays'] =\n    gl.luma.extensions['ANGLE_instanced_arrays'] || gl.getExtension('ANGLE_instanced_arrays');\n  return gl.luma;\n}\n\n// ACCESSORS\n\n/**\n * The max number of attributes in the vertex attribute array is an\n * implementation defined limit, but never smaller than 8\n * @param {WebGLRenderingContext} gl - webgl context\n * @returns {GLuint} - (max) number of attributes in the vertex attribute array\n */\nexport function getMaxAttributes(gl) {\n  assertWebGLContext(gl);\n  return gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n}\n\n/**\n * Is instance divisor availble (checks for WebGL2 or ANGLE extension)\n * @param {WebGLRenderingContext} gl - webgl context\n * @returns {Boolean} - is divisor available?\n */\nexport function hasDivisor(gl) {\n  assertWebGLContext(gl);\n  return Boolean(\n    isWebGL2(gl) ||\n    gl.getExtension(gl, 'ANGLE_instanced_arrays')\n  );\n}\n\n/**\n * Returns true if the vertex attribute is enabled at this index.\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @returns {Boolean} - enabled status\n */\nexport function isEnabled(gl, location) {\n  return Boolean(get(gl, location, gl.VERTEX_ATTRIB_ARRAY_ENABLED));\n}\n\n/**\n * Returns the currently bound buffer\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @returns {WebGLBuffer} Returns the currently bound buffer\n */\nexport function getBuffer(gl, location) {\n  return get(gl, location, gl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING);\n}\n\n/**\n * Get values for generic vertex attributes\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @returns {Float32Array} (with 4 elements) representing the current value\n * of the vertex attribute at the given index.\n */\nexport function getGeneric(gl, location) {\n  return get(gl, gl.CURRENT_VERTEX_ATTRIB);\n}\n\n/**\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n */\n// @returns {GLint} the size of an element of the vertex array.\nexport function getSize(gl, location) {\n  return get(location, gl.VERTEX_ATTRIB_ARRAY_SIZE);\n}\n\n/**\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n */\n// @returns {GLenum} representing the array type.\nexport function getType(gl, location) {\n  return get(location, gl.VERTEX_ATTRIB_ARRAY_TYPE);\n}\n\n/**\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n */\n// @returns {GLboolean} true if fixed-point data types are normalized\n// for the vertex attribute array at the given index.\nexport function isNormalized(gl, location) {\n  return get(location, gl.VERTEX_ATTRIB_ARRAY_NORMALIZED);\n}\n\n/**\n * check if an integer data type in the vertex attribute at index\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - index of the vertex attribute.\n * @returns {GLboolean} - true if an integer data type is in the\n * vertex attribute array at the given index.\n */\nexport function isInteger(gl, location) {\n  assertWebGL2Context(gl);\n  return get(location, gl.VERTEX_ATTRIB_ARRAY_INTEGER);\n}\n\n/**\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @returns {GLint} number of bytes between successive elements in the array.\n * 0 means that the elements are sequential.\n */\nexport function getStride(gl, location) {\n  return get(location, gl.VERTEX_ATTRIB_ARRAY_STRIDE);\n}\n\n/**\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @param {GLuint} pname - enum specifying which offset to return\n * @returns {GLuint} the address of a specified vertex attribute.\n */\nexport function getOffset(\n  gl, location, pname = gl.VERTEX_ATTRIB_ARRAY_POINTER\n) {\n  return gl.getVertexAttribOffset(location, pname);\n}\n\n/**\n * @private\n * Generic getter for information about a vertex attribute at a given position\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - index of the vertex attribute.\n * @param {GLenum} pname - specifies the information to query.\n * @returns {*} - requested vertex attribute information (specified by pname)\n */\nfunction get(gl, location, pname) {\n  assertWebGLContext(gl);\n  return gl.getVertexAttrib(location, pname);\n}\n\n// MODIFIERS\n\n/**\n * Enable the attribute\n * Note: By default all attributes are disabled. Only attributes\n * used by a program's shaders should be enabled.\n *\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n */\nexport function enable(gl, location) {\n  gl.enableVertexAttribArray(location);\n}\n\n/**\n * Disable the attribute\n * Note: Only attributes used by a program's shaders should be enabled.\n *\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n */\nexport function disable(gl, location) {\n  // Don't disable location 0\n  if (location > 0) {\n    gl.disableVertexAttribArray(location);\n  }\n}\n\n/**\n * Set the frequency divisor used for instanced rendering.\n * Note: Usually simply set to 1 or 0 to enable/disable instanced rendering\n * for a specific attribute.\n *\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @param {GLuint} divisor - instances that pass between updates of attribute\n */\nexport function setDivisor(gl, location, divisor) {\n  if (isWebGL2(gl)) {\n    gl.vertexAttribDivisor(location, divisor);\n    return;\n  }\n  const ext = glGetLumaInfo(gl).extensions['ANGLE_instanced_arrays'];\n  if (ext) {\n    ext.vertexAttribDivisorANGLE(location, divisor);\n    return;\n  }\n  // Accept divisor 0 even if instancing is not supported (0 = no instancing)\n  if (divisor !== 0) {\n    throw new Error('WebGL instanced rendering not supported');\n  }\n}\n\n/**\n * Returns the frequency divisor used for instanced rendering.\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @returns {GLuint} divisor\n */\nexport function getDivisor(gl, location) {\n  assert(location > 0);\n  if (isWebGL2(gl)) {\n    const divisor = get(location, gl.VERTEX_ATTRIB_ARRAY_DIVISOR);\n    return divisor;\n  }\n  const ext = glGetLumaInfo(gl).extensions['ANGLE_instanced_arrays'];\n  if (ext) {\n    const divisor = get(location, ext.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);\n    return divisor;\n  }\n  // if instancing is not available, return 0 meaning divisor has not been set\n  return 0;\n}\n\n/**\n * Set a location in vertex attributes array to a buffer, specifying\n * its data layout and integer to float conversion and normalization flags\n *\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @param {WebGLBuffer|Buffer} buffer - WebGL buffer to set as value\n * @param {GLuint} target=gl.ARRAY_BUFFER - which target to bind to\n * @param {Object} layout= Optional data layout, defaults to buffer's layout\n * @param {GLuint} layout.size - number of values per element (1-4)\n * @param {GLuint} layout.type - type of values (e.g. gl.FLOAT)\n * @param {GLbool} layout.normalized=false - normalize integers to [-1,1], [0,1]\n * @param {GLuint} layout.integer=false - WebGL2 only, disable int-to-float conv\n * @param {GLuint} layout.stride=0 - supports strided arrays\n * @param {GLuint} layout.offset=0 - supports strided arrays\n */\nexport function setBuffer({\n  gl,\n  location,\n  buffer,\n  target,\n  layout\n} = {}) {\n  assertWebGLContext(gl);\n\n  // Copy main data characteristics from buffer\n  target = glGet(target !== undefined ? target : buffer.target);\n  layout = layout !== undefined ? layout : buffer.layout;\n  assert(target, 'setBuffer needs target');\n  assert(layout, 'setBuffer called on uninitialized buffer');\n\n  // a non-zero named buffer object must be bound to the GL_ARRAY_BUFFER target\n  buffer.bind({target: gl.ARRAY_BUFFER});\n\n  // Attach bound ARRAY_BUFFER with specified buffer format to location\n  if (!layout.integer) {\n    gl.vertexAttribPointer(\n      location,\n      layout.size,\n      glGet(layout.type),\n      layout.normalized,\n      layout.stride,\n      layout.offset\n    );\n  } else {\n    // specifies *integer* data formats and locations of vertex attributes\n    // For glVertexAttribIPointer, Values are always left as integer values.\n    // Only accepts the integer types gl.BYTE, gl.UNSIGNED_BYTE,\n    // gl.SHORT, gl.UNSIGNED_SHORT, gl.INT, gl.UNSIGNED_INT\n    assertWebGL2Context(gl);\n    gl.vertexAttribIPointer(\n      location,\n      layout.size,\n      glGet(layout.type),\n      layout.stride,\n      layout.offset\n    );\n  }\n\n  buffer.unbind({target: gl.ARRAY_BUFFER});\n}\n\n/*\n * Specify values for generic vertex attributes\n * Generic vertex attributes are constant for all vertices\n * Up to 4 values depending on attribute size\n *\n * @param {WebGLRenderingContext} gl - webgl context\n * @param {GLuint} location - ordinal number of the attribute\n * @param {GLuint} divisor - instances that pass between updates of attribute\n */\nexport function setGeneric({gl, location, array}) {\n  log.warn(0, 'VertexAttributes.setGeneric is not well tested');\n  // throw new Error('vertex attribute size must be between 1 and 4');\n\n  if (array instanceof Float32Array) {\n    gl.vertexAttrib4fv(location, array);\n  } else if (array instanceof Int32Array) {\n    assertWebGL2Context(gl);\n    gl.vertexAttribI4iv(location, array);\n  } else if (array instanceof Uint32Array) {\n    assertWebGL2Context(gl);\n    gl.vertexAttribI4uiv(location, array);\n  }\n}\n\n/*\n * Specify values for generic vertex attributes\n * Generic vertex attributes are constant for all vertices\n * Up to 4 values depending on attribute size\n *\n * @param {GLuint} location - ordinal number of the attribute\n * @param {GLuint} divisor - instances that pass between updates of attribute\n */\n/* eslint-disable max-params */\nexport function setGenericValues(gl, location, v0, v1, v2, v3) {\n  log.warn(0, 'VertexAttributes.setGenericValues is not well tested');\n  switch (arguments.length - 1) {\n  case 1: gl.vertexAttrib1f(location, v0); break;\n  case 2: gl.vertexAttrib2f(location, v0, v1); break;\n  case 3: gl.vertexAttrib3f(location, v0, v1, v2); break;\n  case 4: gl.vertexAttrib4f(location, v0, v1, v2, v3); break;\n  default:\n    throw new Error('vertex attribute size must be between 1 and 4');\n  }\n\n  // assert(gl instanceof WebGL2RenderingContext, 'WebGL2 required');\n  // Looks like these will check how many arguments were supplied?\n  // gl.vertexAttribI4i(location, v0, v1, v2, v3);\n  // gl.vertexAttribI4ui(location, v0, v1, v2, v3);\n}\n"]}