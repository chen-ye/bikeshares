{"version":3,"sources":["../../../../src/shadertools/modules/fog/index.js"],"names":["getUniforms","name","fogEnable","fogColor","fogNear","fogFar","fog_uEnable","fog_uColor","fog_uNear","fog_uFar","vs","fs"],"mappings":";;;;;QAGgBA,W,GAAAA,W;AAHT,IAAMC,sBAAO,KAAb;;AAEP;AACO,SAASD,WAAT,GAKC;AAAA,iFAAJ,EAAI;AAAA,4BAJNE,SAIM;AAAA,MAJNA,SAIM,kCAJM,KAIN;AAAA,2BAHNC,QAGM;AAAA,MAHNA,QAGM,iCAHK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAGL;AAAA,0BAFNC,OAEM;AAAA,MAFNA,OAEM,gCAFI,CAEJ;AAAA,yBADNC,MACM;AAAA,MADNA,MACM,+BADG,GACH;;AACN,SAAO;AACLC,iBAAaJ,SADR;AAELK,gBAAYJ,QAFP;AAGLK,eAAWJ,OAHN;AAILK,cAAUJ;AAJL,GAAP;AAMD;;AAEM,IAAMK,kBAAK,EAAX;;AAEA,IAAMC,+mBAAN","file":"index.js","sourcesContent":["export const name = 'fog';\n\n/* eslint-disable camelcase */\nexport function getUniforms({\n  fogEnable = false,\n  fogColor = [0.5, 0.5, 0.5],\n  fogNear = 1,\n  fogFar = 100\n} = {}) {\n  return {\n    fog_uEnable: fogEnable,\n    fog_uColor: fogColor,\n    fog_uNear: fogNear,\n    fog_uFar: fogFar\n  };\n}\n\nexport const vs = '';\n\nexport const fs = `\\\n// fog configuration\nuniform bool fog_uEnable;\nuniform vec3 fog_uColor;\nuniform float fog_uNear;\nuniform float fog_uFar;\n\n/*\n * Applies linear fog to a color\n * param - unfogged color\n * return - fogged color\n */\nvec4 fog_filterColor(vec4 color) {\n  if (fog_uEnable) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fog_uNear, fog_uFar, depth);\n    return mix(color, vec4(fog_uColor, gl_FragColor.w), fogFactor);\n  } else {\n    return color;\n  }\n}\n\n// Other fog shaders, exponential etc, see\n// http://in2gpu.com/2014/07/22/create-fog-shader/\n`;\n"]}