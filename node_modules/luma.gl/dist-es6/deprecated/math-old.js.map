{"version":3,"sources":["../../src/deprecated/math-old.js"],"names":["sqrt","Math","sin","cos","tan","pi","PI","slice","Array","prototype","Vec3","x","y","z","value","generics","setVec3","dest","vec","set","add","$add","add2","a","b","sub","$sub","sub2","scale","s","$scale","neg","$neg","unit","len","norm","clone","$unit","cross","dx","dy","dz","vx","vy","vz","$cross","distTo","distToSq","normSq","dot","Float32Array","toFloat32Array","ans","typedContainer","proto","method","_","m","args","call","arguments","unshift","apply","Mat4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","length","id","src","i","val","typedArray","mulVec3","$mulVec3","d","mulMat42","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","mulMat4","$mulMat4","copy","transpose","$transpose","n4","n8","n1","n9","n2","n6","n3","n7","rotateAxis","theta","$rotateAxis","c","nc","m11","m12","m13","m21","m22","m23","m31","m32","m33","d11","d12","d13","d14","d21","d22","d23","d24","d31","d32","d33","d34","d41","d42","d43","d44","rotateXYZ","rx","ry","rz","$rotateXYZ","crx","cry","crz","srx","sry","srz","translate","$translate","invert","$invert","x0","x1","x2","x3","x4","x5","x6","x7","x8","x9","x10","x11","x12","x13","x14","x15","a0","a1","a2","a3","a4","a5","b0","b1","b2","b3","b4","b5","invdet","lookAt","eye","center","up","frustum","left","right","bottom","top","near","far","rl","tb","fn","perspective","fov","aspect","ymax","ymin","xmin","xmax","ortho","te","elements","w","h","p","Quat","v","r","u","q","angle","setQuat","mulQuat","aX","aY","aZ","aW","bX","bY","bZ","bW","$mulQuat","divQuat","$divQuat","q0","q1","q2","q3","conjugate","$conjugate","fromQuat"],"mappings":"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","file":"math-old.js","sourcesContent":["// Vec3, Mat4 and Quat classes\n// TODO - clean up linting and remove some of these exceptions\n/* eslint-disable */\n/* eslint-disable computed-property-spacing, brace-style, max-params, one-var */\n/* eslint-disable indent, no-loop-func */\n\nconst sqrt = Math.sqrt;\nconst sin = Math.sin;\nconst cos = Math.cos;\nconst tan = Math.tan;\nconst pi = Math.PI;\nconst slice = Array.prototype.slice;\n\n// Vec3 Class\nexport class Vec3 extends Array {\n\n  constructor(x = 0, y = 0, z = 0) {\n    super(3);\n    this[0] = x;\n    this[1] = y;\n    this[2] = z;\n  }\n\n  // fast Vec3 create.\n  static create() {\n    return new Vec3(3);\n  }\n\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    return (this[0] = value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    return (this[1] = value);\n  }\n\n  get z() {\n    return this[2];\n  }\n\n  set z(value) {\n    return (this[2] = value);\n  }\n}\n\nvar generics = {\n\n  setVec3(dest, vec) {\n    dest[0] = vec[0];\n    dest[1] = vec[1];\n    dest[2] = vec[2];\n    return dest;\n  },\n\n  set(dest, x, y, z) {\n    dest[0] = x;\n    dest[1] = y;\n    dest[2] = z;\n    return dest;\n  },\n\n  add(dest, vec) {\n    return new Vec3(dest[0] + vec[0],\n                    dest[1] + vec[1],\n                    dest[2] + vec[2]);\n  },\n\n  $add(dest, vec) {\n    dest[0] += vec[0];\n    dest[1] += vec[1];\n    dest[2] += vec[2];\n    return dest;\n  },\n\n  add2(dest, a, b) {\n    dest[0] = a[0] + b[0];\n    dest[1] = a[1] + b[1];\n    dest[2] = a[2] + b[2];\n    return dest;\n  },\n\n  sub(dest, vec) {\n    return new Vec3(dest[0] - vec[0],\n                    dest[1] - vec[1],\n                    dest[2] - vec[2]);\n  },\n\n  $sub(dest, vec) {\n    dest[0] -= vec[0];\n    dest[1] -= vec[1];\n    dest[2] -= vec[2];\n    return dest;\n  },\n\n  sub2(dest, a, b) {\n    dest[0] = a[0] - b[0];\n    dest[1] = a[1] - b[1];\n    dest[2] = a[2] - b[2];\n    return dest;\n  },\n\n  scale(dest, s) {\n    return new Vec3(dest[0] * s,\n                    dest[1] * s,\n                    dest[2] * s);\n  },\n\n  $scale(dest, s) {\n    dest[0] *= s;\n    dest[1] *= s;\n    dest[2] *= s;\n    return dest;\n  },\n\n  neg(dest) {\n    return new Vec3(-dest[0],\n                    -dest[1],\n                    -dest[2]);\n  },\n\n  $neg(dest) {\n    dest[0] = -dest[0];\n    dest[1] = -dest[1];\n    dest[2] = -dest[2];\n    return dest;\n  },\n\n  unit(dest) {\n    var len = Vec3.norm(dest);\n\n    if (len > 0) {\n      return Vec3.scale(dest, 1 / len);\n    }\n    return Vec3.clone(dest);\n  },\n\n  $unit(dest) {\n    var len = Vec3.norm(dest);\n\n    if (len > 0) {\n      return Vec3.$scale(dest, 1 / len);\n    }\n    return dest;\n  },\n\n  cross(dest, vec) {\n    var dx = dest[0],\n      dy = dest[1],\n      dz = dest[2],\n      vx = vec[0],\n      vy = vec[1],\n      vz = vec[2];\n\n    return new Vec3(dy * vz - dz * vy,\n                    dz * vx - dx * vz,\n                    dx * vy - dy * vx);\n  },\n\n  $cross(dest, vec) {\n    var dx = dest[0],\n        dy = dest[1],\n        dz = dest[2],\n        vx = vec[0],\n        vy = vec[1],\n        vz = vec[2];\n\n    dest[0] = dy * vz - dz * vy;\n    dest[1] = dz * vx - dx * vz;\n    dest[2] = dx * vy - dy * vx;\n    return dest;\n  },\n\n  distTo(dest, vec) {\n    var dx = dest[0] - vec[0],\n        dy = dest[1] - vec[1],\n        dz = dest[2] - vec[2];\n\n    return sqrt(dx * dx +\n                dy * dy +\n                dz * dz);\n  },\n\n  distToSq(dest, vec) {\n    var dx = dest[0] - vec[0],\n        dy = dest[1] - vec[1],\n        dz = dest[2] - vec[2];\n\n    return dx * dx + dy * dy + dz * dz;\n  },\n\n  norm(dest) {\n    var dx = dest[0], dy = dest[1], dz = dest[2];\n\n    return sqrt(dx * dx + dy * dy + dz * dz);\n  },\n\n  normSq(dest) {\n    var dx = dest[0], dy = dest[1], dz = dest[2];\n\n    return dx * dx + dy * dy + dz * dz;\n  },\n\n  dot(dest, vec) {\n    return dest[0] * vec[0] + dest[1] * vec[1] + dest[2] * vec[2];\n  },\n\n  clone(dest) {\n    if (dest instanceof Vec3) {\n      return new Vec3(dest[0], dest[1], dest[2]);\n    }\n    return Vec3.setVec3(new Float32Array(3), dest);\n  },\n\n  toFloat32Array(dest) {\n    var ans = dest.typedContainer;\n\n    if (!ans) {\n      return dest;\n    }\n\n    ans[0] = dest[0];\n    ans[1] = dest[1];\n    ans[2] = dest[2];\n\n    return ans;\n  }\n};\n\n// add generics and instance methods\nvar proto = Vec3.prototype;\nfor (var method in generics) {\n  Vec3[method] = generics[method];\n  proto[method] = (function _(m) {\n    return function() {\n      var args = slice.call(arguments);\n      args.unshift(this);\n      return Vec3[m].apply(Vec3, args);\n    };\n }(method));\n}\n\n// Mat4 Class\nexport class Mat4 extends Array {\n\n  constructor(n11, n12, n13, n14,\n              n21, n22, n23, n24,\n              n31, n32, n33, n34,\n              n41, n42, n43, n44) {\n\n    super(16);\n\n    this.length = 16;\n\n    if (typeof n11 === 'number') {\n\n      this.set(n11, n12, n13, n14,\n               n21, n22, n23, n24,\n               n31, n32, n33, n34,\n               n41, n42, n43, n44);\n\n    } else {\n      this.id();\n    }\n\n    this.typedContainer = new Float32Array(16);\n  }\n\n  static create() {\n    return new Array(16);\n  }\n\n  copy(src) {\n    for (var i = 0; i < 16; ++i) {\n      this[i] = src[i];\n    }\n    return this;\n  }\n\n  get n11() { return this[0]; }\n  get n12() { return this[4]; }\n  get n13() { return this[8]; }\n  get n14() { return this[12]; }\n  get n21() { return this[1]; }\n  get n22() { return this[5]; }\n  get n23() { return this[9]; }\n  get n24() { return this[13]; }\n  get n31() { return this[2]; }\n  get n32() { return this[6]; }\n  get n33() { return this[10]; }\n  get n34() { return this[14]; }\n  get n41() { return this[3]; }\n  get n42() { return this[7]; }\n  get n43() { return this[11]; }\n  get n44() { return this[15]; }\n\n  set n11(val) { this[0] = val; }\n  set n12(val) { this[4] = val; }\n  set n13(val) { this[8] = val; }\n  set n14(val) { this[12] = val; }\n  set n21(val) { this[1] = val; }\n  set n22(val) { this[5] = val; }\n  set n23(val) { this[9] = val; }\n  set n24(val) { this[13] = val; }\n  set n31(val) { this[2] = val; }\n  set n32(val) { this[6] = val; }\n  set n33(val) { this[10] = val; }\n  set n34(val) { this[14] = val; }\n  set n41(val) { this[3] = val; }\n  set n42(val) { this[7] = val; }\n  set n43(val) { this[11] = val; }\n  set n44(val) { this[15] = val; }\n\n}\n\ngenerics = {\n\n  id(dest) {\n\n    dest[0 ] = 1;\n    dest[1 ] = 0;\n    dest[2 ] = 0;\n    dest[3 ] = 0;\n    dest[4 ] = 0;\n    dest[5 ] = 1;\n    dest[6 ] = 0;\n    dest[7 ] = 0;\n    dest[8 ] = 0;\n    dest[9 ] = 0;\n    dest[10] = 1;\n    dest[11] = 0;\n    dest[12] = 0;\n    dest[13] = 0;\n    dest[14] = 0;\n    dest[15] = 1;\n\n    return dest;\n  },\n\n  clone(dest) {\n    if (dest instanceof Mat4) {\n      return new Mat4(dest[0], dest[4], dest[8], dest[12],\n                      dest[1], dest[5], dest[9], dest[13],\n                      dest[2], dest[6], dest[10], dest[14],\n                      dest[3], dest[7], dest[11], dest[15]);\n    }\n    return new typedArray(dest);\n  },\n\n  set(dest, n11, n12, n13, n14,\n            n21, n22, n23, n24,\n            n31, n32, n33, n34,\n            n41, n42, n43, n44) {\n\n    dest[0 ] = n11;\n    dest[4 ] = n12;\n    dest[8 ] = n13;\n    dest[12] = n14;\n    dest[1 ] = n21;\n    dest[5 ] = n22;\n    dest[9 ] = n23;\n    dest[13] = n24;\n    dest[2 ] = n31;\n    dest[6 ] = n32;\n    dest[10] = n33;\n    dest[14] = n34;\n    dest[3 ] = n41;\n    dest[7 ] = n42;\n    dest[11] = n43;\n    dest[15] = n44;\n\n    return dest;\n  },\n\n  mulVec3(dest, vec) {\n    var ans = Vec3.clone(vec);\n    return Mat4.$mulVec3(dest, ans);\n  },\n\n  $mulVec3(dest, vec) {\n    var vx = vec[0],\n        vy = vec[1],\n        vz = vec[2],\n        d = 1 / (dest[3] * vx + dest[7] * vy + dest[11] * vz + dest[15]);\n\n    vec[0] = (dest[0] * vx + dest[4] * vy + dest[8 ] * vz + dest[12]) * d;\n    vec[1] = (dest[1] * vx + dest[5] * vy + dest[9 ] * vz + dest[13]) * d;\n    vec[2] = (dest[2] * vx + dest[6] * vy + dest[10] * vz + dest[14]) * d;\n\n    return vec;\n  },\n\n  mulMat42(dest, a, b) {\n    var a11 = a[0 ], a12 = a[1 ], a13 = a[2 ], a14 = a[3 ],\n        a21 = a[4 ], a22 = a[5 ], a23 = a[6 ], a24 = a[7 ],\n        a31 = a[8 ], a32 = a[9 ], a33 = a[10], a34 = a[11],\n        a41 = a[12], a42 = a[13], a43 = a[14], a44 = a[15],\n        b11 = b[0 ], b12 = b[1 ], b13 = b[2 ], b14 = b[3 ],\n        b21 = b[4 ], b22 = b[5 ], b23 = b[6 ], b24 = b[7 ],\n        b31 = b[8 ], b32 = b[9 ], b33 = b[10], b34 = b[11],\n        b41 = b[12], b42 = b[13], b43 = b[14], b44 = b[15];\n\n    dest[0 ] = b11 * a11 + b12 * a21 + b13 * a31 + b14 * a41;\n    dest[1 ] = b11 * a12 + b12 * a22 + b13 * a32 + b14 * a42;\n    dest[2 ] = b11 * a13 + b12 * a23 + b13 * a33 + b14 * a43;\n    dest[3 ] = b11 * a14 + b12 * a24 + b13 * a34 + b14 * a44;\n\n    dest[4 ] = b21 * a11 + b22 * a21 + b23 * a31 + b24 * a41;\n    dest[5 ] = b21 * a12 + b22 * a22 + b23 * a32 + b24 * a42;\n    dest[6 ] = b21 * a13 + b22 * a23 + b23 * a33 + b24 * a43;\n    dest[7 ] = b21 * a14 + b22 * a24 + b23 * a34 + b24 * a44;\n\n    dest[8 ] = b31 * a11 + b32 * a21 + b33 * a31 + b34 * a41;\n    dest[9 ] = b31 * a12 + b32 * a22 + b33 * a32 + b34 * a42;\n    dest[10] = b31 * a13 + b32 * a23 + b33 * a33 + b34 * a43;\n    dest[11] = b31 * a14 + b32 * a24 + b33 * a34 + b34 * a44;\n\n    dest[12] = b41 * a11 + b42 * a21 + b43 * a31 + b44 * a41;\n    dest[13] = b41 * a12 + b42 * a22 + b43 * a32 + b44 * a42;\n    dest[14] = b41 * a13 + b42 * a23 + b43 * a33 + b44 * a43;\n    dest[15] = b41 * a14 + b42 * a24 + b43 * a34 + b44 * a44;\n    return dest;\n  },\n\n  mulMat4(a, b) {\n    var m = Mat4.clone(a);\n    return Mat4.mulMat42(m, a, b);\n  },\n\n  $mulMat4(a, b) {\n    return Mat4.mulMat42(a, a, b);\n  },\n\n  add(dest, m) {\n    var copy = Mat4.clone(dest);\n    return Mat4.$add(copy, m);\n  },\n\n  $add(dest, m) {\n    dest[0 ] += m[0];\n    dest[1 ] += m[1];\n    dest[2 ] += m[2];\n    dest[3 ] += m[3];\n    dest[4 ] += m[4];\n    dest[5 ] += m[5];\n    dest[6 ] += m[6];\n    dest[7 ] += m[7];\n    dest[8 ] += m[8];\n    dest[9 ] += m[9];\n    dest[10] += m[10];\n    dest[11] += m[11];\n    dest[12] += m[12];\n    dest[13] += m[13];\n    dest[14] += m[14];\n    dest[15] += m[15];\n\n    return dest;\n  },\n\n  transpose(dest) {\n    var m = Mat4.clone(dest);\n    return Mat4.$transpose(m);\n  },\n\n  $transpose(dest) {\n    var n4 = dest[4], n8 = dest[8], n12 = dest[12],\n        n1 = dest[1], n9 = dest[9], n13 = dest[13],\n        n2 = dest[2], n6 = dest[6], n14 = dest[14],\n        n3 = dest[3], n7 = dest[7], n11 = dest[11];\n\n    dest[1] = n4;\n    dest[2] = n8;\n    dest[3] = n12;\n    dest[4] = n1;\n    dest[6] = n9;\n    dest[7] = n13;\n    dest[8] = n2;\n    dest[9] = n6;\n    dest[11] = n14;\n    dest[12] = n3;\n    dest[13] = n7;\n    dest[14] = n11;\n\n    return dest;\n  },\n\n  rotateAxis(dest, theta, vec) {\n    var m = Mat4.clone(dest);\n    return Mat4.$rotateAxis(m, theta, vec);\n  },\n\n  $rotateAxis(dest, theta, vec) {\n    var s = sin(theta),\n        c = cos(theta),\n        nc = 1 - c,\n        vx = vec[0],\n        vy = vec[1],\n        vz = vec[2],\n        m11 = vx * vx * nc + c,\n        m12 = vx * vy * nc + vz * s,\n        m13 = vx * vz * nc - vy * s,\n        m21 = vy * vx * nc - vz * s,\n        m22 = vy * vy * nc + c,\n        m23 = vy * vz * nc + vx * s,\n        m31 = vx * vz * nc + vy * s,\n        m32 = vy * vz * nc - vx * s,\n        m33 = vz * vz * nc + c,\n        d11 = dest[0],\n        d12 = dest[1],\n        d13 = dest[2],\n        d14 = dest[3],\n        d21 = dest[4],\n        d22 = dest[5],\n        d23 = dest[6],\n        d24 = dest[7],\n        d31 = dest[8],\n        d32 = dest[9],\n        d33 = dest[10],\n        d34 = dest[11],\n        d41 = dest[12],\n        d42 = dest[13],\n        d43 = dest[14],\n        d44 = dest[15];\n\n    dest[0 ] = d11 * m11 + d21 * m12 + d31 * m13;\n    dest[1 ] = d12 * m11 + d22 * m12 + d32 * m13;\n    dest[2 ] = d13 * m11 + d23 * m12 + d33 * m13;\n    dest[3 ] = d14 * m11 + d24 * m12 + d34 * m13;\n\n    dest[4 ] = d11 * m21 + d21 * m22 + d31 * m23;\n    dest[5 ] = d12 * m21 + d22 * m22 + d32 * m23;\n    dest[6 ] = d13 * m21 + d23 * m22 + d33 * m23;\n    dest[7 ] = d14 * m21 + d24 * m22 + d34 * m23;\n\n    dest[8 ] = d11 * m31 + d21 * m32 + d31 * m33;\n    dest[9 ] = d12 * m31 + d22 * m32 + d32 * m33;\n    dest[10] = d13 * m31 + d23 * m32 + d33 * m33;\n    dest[11] = d14 * m31 + d24 * m32 + d34 * m33;\n\n    return dest;\n  },\n\n  rotateXYZ(dest, rx, ry, rz) {\n    var ans = Mat4.clone(dest);\n    return Mat4.$rotateXYZ(ans, rx, ry, rz);\n  },\n\n  $rotateXYZ(dest, rx, ry, rz) {\n    var d11 = dest[0 ],\n        d12 = dest[1 ],\n        d13 = dest[2 ],\n        d14 = dest[3 ],\n        d21 = dest[4 ],\n        d22 = dest[5 ],\n        d23 = dest[6 ],\n        d24 = dest[7 ],\n        d31 = dest[8 ],\n        d32 = dest[9 ],\n        d33 = dest[10],\n        d34 = dest[11],\n        crx = cos(rx),\n        cry = cos(ry),\n        crz = cos(rz),\n        srx = sin(rx),\n        sry = sin(ry),\n        srz = sin(rz),\n        m11 =  cry * crz,\n        m21 = -crx * srz + srx * sry * crz,\n        m31 =  srx * srz + crx * sry * crz,\n        m12 =  cry * srz,\n        m22 =  crx * crz + srx * sry * srz,\n        m32 = -srx * crz + crx * sry * srz,\n        m13 = -sry,\n        m23 =  srx * cry,\n        m33 =  crx * cry;\n\n    dest[0 ] = d11 * m11 + d21 * m12 + d31 * m13;\n    dest[1 ] = d12 * m11 + d22 * m12 + d32 * m13;\n    dest[2 ] = d13 * m11 + d23 * m12 + d33 * m13;\n    dest[3 ] = d14 * m11 + d24 * m12 + d34 * m13;\n\n    dest[4 ] = d11 * m21 + d21 * m22 + d31 * m23;\n    dest[5 ] = d12 * m21 + d22 * m22 + d32 * m23;\n    dest[6 ] = d13 * m21 + d23 * m22 + d33 * m23;\n    dest[7 ] = d14 * m21 + d24 * m22 + d34 * m23;\n\n    dest[8 ] = d11 * m31 + d21 * m32 + d31 * m33;\n    dest[9 ] = d12 * m31 + d22 * m32 + d32 * m33;\n    dest[10] = d13 * m31 + d23 * m32 + d33 * m33;\n    dest[11] = d14 * m31 + d24 * m32 + d34 * m33;\n\n    return dest;\n  },\n\n  translate(dest, x, y, z) {\n    var m = Mat4.clone(dest);\n    return Mat4.$translate(m, x, y, z);\n  },\n\n  $translate(dest, x, y, z) {\n    dest[12] = dest[0 ] * x + dest[4 ] * y + dest[8 ] * z + dest[12];\n    dest[13] = dest[1 ] * x + dest[5 ] * y + dest[9 ] * z + dest[13];\n    dest[14] = dest[2 ] * x + dest[6 ] * y + dest[10] * z + dest[14];\n    dest[15] = dest[3 ] * x + dest[7 ] * y + dest[11] * z + dest[15];\n\n    return dest;\n  },\n\n  scale(dest, x, y, z) {\n    var m = Mat4.clone(dest);\n    return Mat4.$scale(m, x, y, z);\n  },\n\n  $scale(dest, x, y, z) {\n    dest[0 ] *= x;\n    dest[1 ] *= x;\n    dest[2 ] *= x;\n    dest[3 ] *= x;\n    dest[4 ] *= y;\n    dest[5 ] *= y;\n    dest[6 ] *= y;\n    dest[7 ] *= y;\n    dest[8 ] *= z;\n    dest[9 ] *= z;\n    dest[10] *= z;\n    dest[11] *= z;\n\n    return dest;\n  },\n\n  // Method based on PreGL https:// github.com/deanm/pregl/ (c) Dean McNamee.\n  invert(dest) {\n    var m = Mat4.clone(dest);\n    return  Mat4.$invert(m);\n  },\n\n  $invert(dest) {\n    var x0 = dest[0],  x1 = dest[1],  x2 = dest[2],  x3 = dest[3],\n        x4 = dest[4],  x5 = dest[5],  x6 = dest[6],  x7 = dest[7],\n        x8 = dest[8],  x9 = dest[9], x10 = dest[10], x11 = dest[11],\n        x12 = dest[12], x13 = dest[13], x14 = dest[14], x15 = dest[15];\n\n    var a0 = x0 * x5 - x1 * x4,\n        a1 = x0 * x6 - x2 * x4,\n        a2 = x0 * x7 - x3 * x4,\n        a3 = x1 * x6 - x2 * x5,\n        a4 = x1 * x7 - x3 * x5,\n        a5 = x2 * x7 - x3 * x6,\n        b0 = x8 * x13 - x9 * x12,\n        b1 = x8 * x14 - x10 * x12,\n        b2 = x8 * x15 - x11 * x12,\n        b3 = x9 * x14 - x10 * x13,\n        b4 = x9 * x15 - x11 * x13,\n        b5 = x10 * x15 - x11 * x14;\n\n    var invdet = 1 /\n      (a0 * b5 - a1 * b4 + a2 * b3 + a3 * b2 - a4 * b1 + a5 * b0);\n\n    dest[0 ] = (+ x5 * b5 - x6 * b4 + x7 * b3) * invdet;\n    dest[1 ] = (- x1 * b5 + x2 * b4 - x3 * b3) * invdet;\n    dest[2 ] = (+ x13 * a5 - x14 * a4 + x15 * a3) * invdet;\n    dest[3 ] = (- x9 * a5 + x10 * a4 - x11 * a3) * invdet;\n    dest[4 ] = (- x4 * b5 + x6 * b2 - x7 * b1) * invdet;\n    dest[5 ] = (+ x0 * b5 - x2 * b2 + x3 * b1) * invdet;\n    dest[6 ] = (- x12 * a5 + x14 * a2 - x15 * a1) * invdet;\n    dest[7 ] = (+ x8 * a5 - x10 * a2 + x11 * a1) * invdet;\n    dest[8 ] = (+ x4 * b4 - x5 * b2 + x7 * b0) * invdet;\n    dest[9 ] = (- x0 * b4 + x1 * b2 - x3 * b0) * invdet;\n    dest[10] = (+ x12 * a4 - x13 * a2 + x15 * a0) * invdet;\n    dest[11] = (- x8 * a4 + x9 * a2 - x11 * a0) * invdet;\n    dest[12] = (- x4 * b3 + x5 * b1 - x6 * b0) * invdet;\n    dest[13] = (+ x0 * b3 - x1 * b1 + x2 * b0) * invdet;\n    dest[14] = (- x12 * a3 + x13 * a1 - x14 * a0) * invdet;\n    dest[15] = (+ x8 * a3 - x9 * a1 + x10 * a0) * invdet;\n\n    return dest;\n\n  },\n  // TODO(nico) breaking convention here...\n  // because I don't think it's useful to add\n  // two methods for each of these.\n  lookAt(dest, eye, center, up) {\n    var z = Vec3.sub(eye, center);\n    z.$unit();\n    var x = Vec3.cross(up, z);\n    x.$unit();\n    var y = Vec3.cross(z, x);\n    y.$unit();\n    return Mat4.set(dest, x[0], x[1], x[2], -x.dot(eye),\n                          y[0], y[1], y[2], -y.dot(eye),\n                          z[0], z[1], z[2], -z.dot(eye),\n                          0, 0, 0, 1);\n  },\n\n  frustum(dest, left, right, bottom, top, near, far) {\n    var rl = right - left,\n        tb = top - bottom,\n        fn = far - near;\n\n    dest[0] = (near * 2) / rl;\n    dest[1] = 0;\n    dest[2] = 0;\n    dest[3] = 0;\n    dest[4] = 0;\n    dest[5] = (near * 2) / tb;\n    dest[6] = 0;\n    dest[7] = 0;\n    dest[8] = (right + left) / rl;\n    dest[9] = (top + bottom) / tb;\n    dest[10] = -(far + near) / fn;\n    dest[11] = -1;\n    dest[12] = 0;\n    dest[13] = 0;\n    dest[14] = -(far * near * 2) / fn;\n    dest[15] = 0;\n\n    return dest;\n  },\n\n  perspective(dest, fov, aspect, near, far) {\n    var ymax = near * tan(fov * pi / 360),\n        ymin = -ymax,\n        xmin = ymin * aspect,\n        xmax = ymax * aspect;\n\n    return Mat4.frustum(dest, xmin, xmax, ymin, ymax, near, far);\n  },\n\n  ortho(dest, left, right, top, bottom, near, far) {\n    var te = this.elements,\n        w = right - left,\n        h = top - bottom,\n        p = far - near,\n        x = (right + left) / w,\n        y = (top + bottom) / h,\n        z = (far + near) / p;\n\n    dest[0] = 2 / w;\tdest[4] = 0;\tdest[8] = 0;\tdest[12] = -x;\n    dest[1] = 0;\tdest[5] = 2 / h;\tdest[9] = 0;\tdest[13] = -y;\n    dest[2] = 0;\tdest[6] = 0;\tdest[10] = -2 / p;\tdest[14] = -z;\n    dest[3] = 0;\tdest[7] = 0;\tdest[11] = 0;\tdest[15] = 1;\n\n    return dest;\n\t},\n\n  toFloat32Array(dest) {\n    var ans = dest.typedContainer;\n\n    if (!ans) {\n      return dest;\n    }\n\n    ans[0] = dest[0];\n    ans[1] = dest[1];\n    ans[2] = dest[2];\n    ans[3] = dest[3];\n    ans[4] = dest[4];\n    ans[5] = dest[5];\n    ans[6] = dest[6];\n    ans[7] = dest[7];\n    ans[8] = dest[8];\n    ans[9] = dest[9];\n    ans[10] = dest[10];\n    ans[11] = dest[11];\n    ans[12] = dest[12];\n    ans[13] = dest[13];\n    ans[14] = dest[14];\n    ans[15] = dest[15];\n\n    return ans;\n  }\n\n};\n\n// add generics and instance methods\nproto = Mat4.prototype;\nfor (method in generics) {\n  Mat4[method] = generics[method];\n  proto[method] = (function (m) {\n    return function() {\n      var args = slice.call(arguments);\n\n      args.unshift(this);\n      return Mat4[m].apply(Mat4, args);\n    };\n })(method);\n}\n\n// Quaternion class\nexport class Quat extends Array {\n  constructor(x, y, z, w) {\n    super(4);\n    this[0] = x || 0;\n    this[1] = y || 0;\n    this[2] = z || 0;\n    this[3] = w || 0;\n\n    this.typedContainer = new Float32Array(4);\n  }\n\n  static create() {\n    return new Array(4);\n  }\n\n  static fromVec3(v, r) {\n    return new Quat(v[0], v[1], v[2], r || 0);\n  }\n\n  static fromMat4(m) {\n    var u;\n    var v;\n    var w;\n\n    // Choose u, v, and w such that u is the index of the biggest diagonal entry\n    // of m, and u v w is an even permutation of 0 1 and 2.\n    if (m[0] > m[5] && m[0] > m[10]) {\n      u = 0;\n      v = 1;\n      w = 2;\n    } else if (m[5] > m[0] && m[5] > m[10]) {\n      u = 1;\n      v = 2;\n      w = 0;\n    } else {\n      u = 2;\n      v = 0;\n      w = 1;\n    }\n\n    var r = sqrt(1 + m[u * 5] - m[v * 5] - m[w * 5]);\n    var q = new Quat;\n\n    q[u] = 0.5 * r;\n    q[v] = 0.5 * (m['n' + v + '' + u] + m['n' + u + '' + v]) / r;\n    q[w] = 0.5 * (m['n' + u + '' + w] + m['n' + w + '' + u]) / r;\n    q[3] = 0.5 * (m['n' + v + '' + w] - m['n' + w + '' + v]) / r;\n\n    return q;\n  }\n\n  static fromXRotation(angle) {\n    return new Quat(sin(angle / 2), 0, 0, cos(angle / 2));\n  }\n\n  static fromYRotation(angle) {\n    return new Quat(0, sin(angle / 2), 0, cos(angle / 2));\n  }\n\n  static fromZRotation(angle) {\n    return new Quat(0, 0, sin(angle / 2), cos(angle / 2));\n  }\n\n  static fromAxisRotation(vec, angle) {\n    var x = vec[0],\n        y = vec[1],\n        z = vec[2],\n        d = 1 / sqrt(x * x + y * y + z * z),\n        s = sin(angle / 2),\n        c = cos(angle / 2);\n\n    return new Quat(s * x * d, s * y * d, s * z * d, c);\n  }\n\n}\n\ngenerics = {\n\n  setQuat(dest, q) {\n    dest[0] = q[0];\n    dest[1] = q[1];\n    dest[2] = q[2];\n    dest[3] = q[3];\n\n    return dest;\n  },\n\n  set(dest, x, y, z, w) {\n    dest[0] = x || 0;\n    dest[1] = y || 0;\n    dest[2] = z || 0;\n    dest[3] = w || 0;\n\n    return dest;\n  },\n\n  clone(dest) {\n    if (dest instanceof Quat) {\n      return new Quat(dest[0], dest[1], dest[2], dest[3]);\n    }\n    return Quat.setQuat(new typedArray(4), dest);\n  },\n\n  neg(dest) {\n    return new Quat(-dest[0], -dest[1], -dest[2], -dest[3]);\n  },\n\n  $neg(dest) {\n    dest[0] = -dest[0];\n    dest[1] = -dest[1];\n    dest[2] = -dest[2];\n    dest[3] = -dest[3];\n\n    return dest;\n  },\n\n  add(dest, q) {\n    return new Quat(dest[0] + q[0],\n                    dest[1] + q[1],\n                    dest[2] + q[2],\n                    dest[3] + q[3]);\n  },\n\n  $add(dest, q) {\n    dest[0] += q[0];\n    dest[1] += q[1];\n    dest[2] += q[2];\n    dest[3] += q[3];\n\n    return dest;\n  },\n\n  sub(dest, q) {\n    return new Quat(dest[0] - q[0],\n                    dest[1] - q[1],\n                    dest[2] - q[2],\n                    dest[3] - q[3]);\n  },\n\n  $sub(dest, q) {\n    dest[0] -= q[0];\n    dest[1] -= q[1];\n    dest[2] -= q[2];\n    dest[3] -= q[3];\n\n    return dest;\n  },\n\n  scale(dest, s) {\n    return new Quat(dest[0] * s,\n                    dest[1] * s,\n                    dest[2] * s,\n                    dest[3] * s);\n  },\n\n  $scale(dest, s) {\n    dest[0] *= s;\n    dest[1] *= s;\n    dest[2] *= s;\n    dest[3] *= s;\n\n    return dest;\n  },\n\n  mulQuat(dest, q) {\n    var aX = dest[0],\n        aY = dest[1],\n        aZ = dest[2],\n        aW = dest[3],\n        bX = q[0],\n        bY = q[1],\n        bZ = q[2],\n        bW = q[3];\n\n    return new Quat(aW * bX + aX * bW + aY * bZ - aZ * bY,\n                    aW * bY + aY * bW + aZ * bX - aX * bZ,\n                    aW * bZ + aZ * bW + aX * bY - aY * bX,\n                    aW * bW - aX * bX - aY * bY - aZ * bZ);\n  },\n\n  $mulQuat(dest, q) {\n    var aX = dest[0],\n        aY = dest[1],\n        aZ = dest[2],\n        aW = dest[3],\n        bX = q[0],\n        bY = q[1],\n        bZ = q[2],\n        bW = q[3];\n\n    dest[0] = aW * bX + aX * bW + aY * bZ - aZ * bY;\n    dest[1] = aW * bY + aY * bW + aZ * bX - aX * bZ;\n    dest[2] = aW * bZ + aZ * bW + aX * bY - aY * bX;\n    dest[3] = aW * bW - aX * bX - aY * bY - aZ * bZ;\n\n    return dest;\n  },\n\n  divQuat(dest, q) {\n    var aX = dest[0],\n        aY = dest[1],\n        aZ = dest[2],\n        aW = dest[3],\n        bX = q[0],\n        bY = q[1],\n        bZ = q[2],\n        bW = q[3];\n\n    var d = 1 / (bW * bW + bX * bX + bY * bY + bZ * bZ);\n\n    return new Quat((aX * bW - aW * bX - aY * bZ + aZ * bY) * d,\n                    (aX * bZ - aW * bY + aY * bW - aZ * bX) * d,\n                    (aY * bX + aZ * bW - aW * bZ - aX * bY) * d,\n                    (aW * bW + aX * bX + aY * bY + aZ * bZ) * d);\n  },\n\n  $divQuat(dest, q) {\n    var aX = dest[0],\n        aY = dest[1],\n        aZ = dest[2],\n        aW = dest[3],\n        bX = q[0],\n        bY = q[1],\n        bZ = q[2],\n        bW = q[3];\n\n    var d = 1 / (bW * bW + bX * bX + bY * bY + bZ * bZ);\n\n    dest[0] = (aX * bW - aW * bX - aY * bZ + aZ * bY) * d;\n    dest[1] = (aX * bZ - aW * bY + aY * bW - aZ * bX) * d;\n    dest[2] = (aY * bX + aZ * bW - aW * bZ - aX * bY) * d;\n    dest[3] = (aW * bW + aX * bX + aY * bY + aZ * bZ) * d;\n\n    return dest;\n  },\n\n  invert(dest) {\n    var q0 = dest[0],\n        q1 = dest[1],\n        q2 = dest[2],\n        q3 = dest[3];\n\n    var d = 1 / (q0 * q0 + q1 * q1 + q2 * q2 + q3 * q3);\n\n    return new Quat(-q0 * d, -q1 * d, -q2 * d, q3 * d);\n  },\n\n  $invert(dest) {\n    var q0 = dest[0],\n        q1 = dest[1],\n        q2 = dest[2],\n        q3 = dest[3];\n\n    var d = 1 / (q0 * q0 + q1 * q1 + q2 * q2 + q3 * q3);\n\n    dest[0] = -q0 * d;\n    dest[1] = -q1 * d;\n    dest[2] = -q2 * d;\n    dest[3] = q3 * d;\n\n    return dest;\n  },\n\n  norm(dest) {\n    var a = dest[0],\n        b = dest[1],\n        c = dest[2],\n        d = dest[3];\n\n    return sqrt(a * a + b * b + c * c + d * d);\n  },\n\n  normSq(dest) {\n    var a = dest[0],\n        b = dest[1],\n        c = dest[2],\n        d = dest[3];\n\n    return a * a + b * b + c * c + d * d;\n  },\n\n  unit(dest) {\n    return Quat.scale(dest, 1 / Quat.norm(dest));\n  },\n\n  $unit(dest) {\n    return Quat.$scale(dest, 1 / Quat.norm(dest));\n  },\n\n  conjugate(dest) {\n    return new Quat(-dest[0], -dest[1], -dest[2], dest[3]);\n  },\n\n  $conjugate(dest) {\n    dest[0] = -dest[0];\n    dest[1] = -dest[1];\n    dest[2] = -dest[2];\n    return dest;\n  }\n};\n\n// add generics and instance methods\n\nproto = Quat.prototype;\n\nfor (method in generics) {\n  Quat[method] = generics[method];\n  proto[method] = (function (m) {\n    return function() {\n      var args = slice.call(arguments);\n\n      args.unshift(this);\n      return Quat[m].apply(Quat, args);\n    };\n })(method);\n}\n\n// Add static methods\nVec3.fromQuat = function(q) {\n  return new Vec3(q[0], q[1], q[2]);\n};\n\nMat4.fromQuat = function(q) {\n  var a = q[3],\n      b = q[0],\n      c = q[1],\n      d = q[2];\n\n  return new Mat4(\n    a * a + b * b - c * c - d * d,\n    2 * b * c - 2 * a * d,\n    2 * b * d + 2 * a * c,\n    0,\n\n    2 * b * c + 2 * a * d,\n    a * a - b * b + c * c - d * d,\n    2 * c * d - 2 * a * b,\n    0,\n\n    2 * b * d - 2 * a * c,\n    2 * c * d + 2 * a * b,\n    a * a - b * b - c * c + d * d,\n    0,\n\n    0, 0, 0, 1);\n};\n"]}