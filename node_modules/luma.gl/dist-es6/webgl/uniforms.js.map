{"version":3,"sources":["../../src/webgl/uniforms.js"],"names":["Texture","formatValue","assert","GL_FLOAT","GL_FLOAT_VEC2","GL_FLOAT_VEC3","GL_FLOAT_VEC4","GL_INT","GL_INT_VEC2","GL_INT_VEC3","GL_INT_VEC4","GL_BOOL","GL_BOOL_VEC2","GL_BOOL_VEC3","GL_BOOL_VEC4","GL_FLOAT_MAT2","GL_FLOAT_MAT3","GL_FLOAT_MAT4","GL_SAMPLER_2D","GL_SAMPLER_CUBE","GL_UNSIGNED_INT","GL_UNSIGNED_INT_VEC2","GL_UNSIGNED_INT_VEC3","GL_UNSIGNED_INT_VEC4","GL_FLOAT_MAT2x3","GL_FLOAT_MAT2x4","GL_FLOAT_MAT3x2","GL_FLOAT_MAT3x4","GL_FLOAT_MAT4x2","GL_FLOAT_MAT4x3","GL_SAMPLER_3D","GL_SAMPLER_2D_SHADOW","GL_SAMPLER_2D_ARRAY","GL_SAMPLER_2D_ARRAY_SHADOW","GL_SAMPLER_CUBE_SHADOW","GL_INT_SAMPLER_2D","GL_INT_SAMPLER_3D","GL_INT_SAMPLER_CUBE","GL_INT_SAMPLER_2D_ARRAY","GL_UNSIGNED_INT_SAMPLER_2D","GL_UNSIGNED_INT_SAMPLER_3D","GL_UNSIGNED_INT_SAMPLER_CUBE","GL_UNSIGNED_INT_SAMPLER_2D_ARRAY","UNIFORM_SETTERS","gl","location","value","uniform1f","uniform2fv","Float32Array","uniform3fv","uniform4fv","uniform1i","uniform2iv","Int32Array","uniform3iv","uniform4iv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform1ui","uniform2uiv","Uint32Array","uniform3uiv","uniform4uiv","uniformMatrix2x3fv","uniformMatrix2x4fv","uniformMatrix3x2fv","uniformMatrix3x4fv","uniformMatrix4x2fv","uniformMatrix4x3fv","parseUniformName","name","UNIFORM_NAME_REGEXP","matches","match","length","Error","isArray","Boolean","getUniformSetter","info","setter","type","bind","checkUniformValues","uniforms","source","uniformName","checkUniformValue","console","error","ok","Array","element","isFinite","ArrayBuffer","isView","getUniformsTable","header","program","uniformLocations","_uniformSetters","table","uniform","undefined","Type","Value","unusedTable","unusedCount"],"mappings":"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","file":"uniforms.js","sourcesContent":["import Texture from './texture';\nimport {formatValue} from '../utils';\nimport assert from 'assert';\n\n// Local constants, will be \"collapsed\" during minification\n\n// WebGL1\n\nconst GL_FLOAT = 0x1406;\nconst GL_FLOAT_VEC2 = 0x8B50;\nconst GL_FLOAT_VEC3 = 0x8B51;\nconst GL_FLOAT_VEC4 = 0x8B52;\n\nconst GL_INT = 0x1404;\nconst GL_INT_VEC2 = 0x8B53;\nconst GL_INT_VEC3 = 0x8B54;\nconst GL_INT_VEC4 = 0x8B55;\n\nconst GL_BOOL = 0x8B56;\nconst GL_BOOL_VEC2 = 0x8B57;\nconst GL_BOOL_VEC3 = 0x8B58;\nconst GL_BOOL_VEC4 = 0x8B59;\n\nconst GL_FLOAT_MAT2 = 0x8B5A;\nconst GL_FLOAT_MAT3 = 0x8B5B;\nconst GL_FLOAT_MAT4 = 0x8B5C;\n\nconst GL_SAMPLER_2D = 0x8B5E;\nconst GL_SAMPLER_CUBE = 0x8B60;\n\n// WebGL2\n\nconst GL_UNSIGNED_INT = 0x1405;\nconst GL_UNSIGNED_INT_VEC2 = 0x8DC6;\nconst GL_UNSIGNED_INT_VEC3 = 0x8DC7;\nconst GL_UNSIGNED_INT_VEC4 = 0x8DC8;\n\n/* eslint-disable camelcase */\nconst GL_FLOAT_MAT2x3 = 0x8B65;\nconst GL_FLOAT_MAT2x4 = 0x8B66;\nconst GL_FLOAT_MAT3x2 = 0x8B67;\nconst GL_FLOAT_MAT3x4 = 0x8B68;\nconst GL_FLOAT_MAT4x2 = 0x8B69;\nconst GL_FLOAT_MAT4x3 = 0x8B6A;\n\nconst GL_SAMPLER_3D = 0x8B5F;\nconst GL_SAMPLER_2D_SHADOW = 0x8B62;\nconst GL_SAMPLER_2D_ARRAY = 0x8DC1;\nconst GL_SAMPLER_2D_ARRAY_SHADOW = 0x8DC4;\nconst GL_SAMPLER_CUBE_SHADOW = 0x8DC5;\nconst GL_INT_SAMPLER_2D = 0x8DCA;\nconst GL_INT_SAMPLER_3D = 0x8DCB;\nconst GL_INT_SAMPLER_CUBE = 0x8DCC;\nconst GL_INT_SAMPLER_2D_ARRAY = 0x8DCF;\nconst GL_UNSIGNED_INT_SAMPLER_2D = 0x8DD2;\nconst GL_UNSIGNED_INT_SAMPLER_3D = 0x8DD3;\nconst GL_UNSIGNED_INT_SAMPLER_CUBE = 0x8DD4;\nconst GL_UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8DD7;\n\n/* TODO - create static Float32...Arrays and copy into those instead of minting new ones?\nconst arrays = {};\nfunction getTypedArray(type, data) {\n  if (flatArrayLength > 1) {\n    setter = val => {\n      if (!(val instanceof TypedArray)) {\n        const typedArray = new TypedArray(flatArrayLength);\n        typedArray.set(val);\n        val = typedArray;\n      }\n      assert(val.length === flatArrayLength);\n    };\n  }\n}\n// TODO - handle array uniforms\n*/\n\nconst UNIFORM_SETTERS = {\n\n  // WEBGL1\n\n  /* eslint-disable max-len */\n  [GL_FLOAT]: (gl, location, value) => gl.uniform1f(location, value),\n  [GL_FLOAT_VEC2]: (gl, location, value) => gl.uniform2fv(location, new Float32Array(value)),\n  [GL_FLOAT_VEC3]: (gl, location, value) => gl.uniform3fv(location, new Float32Array(value)),\n  [GL_FLOAT_VEC4]: (gl, location, value) => gl.uniform4fv(location, new Float32Array(value)),\n\n  [GL_INT]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_INT_VEC2]: (gl, location, value) => gl.uniform2iv(location, new Int32Array(value)),\n  [GL_INT_VEC3]: (gl, location, value) => gl.uniform3iv(location, new Int32Array(value)),\n  [GL_INT_VEC4]: (gl, location, value) => gl.uniform4iv(location, new Int32Array(value)),\n\n  [GL_BOOL]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_BOOL_VEC2]: (gl, location, value) => gl.uniform2iv(location, new Int32Array(value)),\n  [GL_BOOL_VEC3]: (gl, location, value) => gl.uniform3fv(location, new Int32Array(value)),\n  [GL_BOOL_VEC4]: (gl, location, value) => gl.uniform4iv(location, new Int32Array(value)),\n\n  // uniformMatrix(false): don't transpose the matrix\n  [GL_FLOAT_MAT2]: (gl, location, value) => gl.uniformMatrix2fv(location, false, new Float32Array(value)),\n  [GL_FLOAT_MAT3]: (gl, location, value) => gl.uniformMatrix3fv(location, false, new Float32Array(value)),\n  [GL_FLOAT_MAT4]: (gl, location, value) => gl.uniformMatrix4fv(location, false, new Float32Array(value)),\n\n  [GL_SAMPLER_2D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_SAMPLER_CUBE]: (gl, location, value) => gl.uniform1i(location, value),\n\n  // WEBGL2 - unsigned integers, irregular matrices, additional texture samplers\n\n  [GL_UNSIGNED_INT]: (gl, location, value) => gl.uniform1ui(location, value),\n  [GL_UNSIGNED_INT_VEC2]: (gl, location, value) => gl.uniform2uiv(location, new Uint32Array(value)),\n  [GL_UNSIGNED_INT_VEC3]: (gl, location, value) => gl.uniform3uiv(location, new Uint32Array(value)),\n  [GL_UNSIGNED_INT_VEC4]: (gl, location, value) => gl.uniform4uiv(location, new Uint32Array(value)),\n\n  // uniformMatrix(false): don't transpose the matrix\n  [GL_FLOAT_MAT2x3]: (gl, location, value) => gl.uniformMatrix2x3fv(location, false, new Float32Array(value)),\n  [GL_FLOAT_MAT2x4]: (gl, location, value) => gl.uniformMatrix2x4fv(location, false, new Float32Array(value)),\n  [GL_FLOAT_MAT3x2]: (gl, location, value) => gl.uniformMatrix3x2fv(location, false, new Float32Array(value)),\n  [GL_FLOAT_MAT3x4]: (gl, location, value) => gl.uniformMatrix3x4fv(location, false, new Float32Array(value)),\n  [GL_FLOAT_MAT4x2]: (gl, location, value) => gl.uniformMatrix4x2fv(location, false, new Float32Array(value)),\n  [GL_FLOAT_MAT4x3]: (gl, location, value) => gl.uniformMatrix4x3fv(location, false, new Float32Array(value)),\n\n  [GL_SAMPLER_3D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_SAMPLER_2D_SHADOW]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_SAMPLER_2D_ARRAY]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_SAMPLER_2D_ARRAY_SHADOW]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_SAMPLER_CUBE_SHADOW]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_INT_SAMPLER_2D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_INT_SAMPLER_3D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_INT_SAMPLER_CUBE]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_INT_SAMPLER_2D_ARRAY]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_UNSIGNED_INT_SAMPLER_2D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_UNSIGNED_INT_SAMPLER_3D]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_UNSIGNED_INT_SAMPLER_CUBE]: (gl, location, value) => gl.uniform1i(location, value),\n  [GL_UNSIGNED_INT_SAMPLER_2D_ARRAY]: (gl, location, value) => gl.uniform1i(location, value)\n  /* eslint-enable max-len */\n};\n\nexport function parseUniformName(name) {\n  // name = name[name.length - 1] === ']' ?\n  // name.substr(0, name.length - 3) : name;\n\n  // if array name then clean the array brackets\n  const UNIFORM_NAME_REGEXP = /([^\\[]*)(\\[[0-9]+\\])?/;\n  const matches = name.match(UNIFORM_NAME_REGEXP);\n  if (!matches || matches.length < 2) {\n    throw new Error(`Failed to parse GLSL uniform name ${name}`);\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\n\n// Returns a Magic Uniform Setter\n/* eslint-disable complexity */\nexport function getUniformSetter(gl, location, info) {\n  const setter = UNIFORM_SETTERS[info.type];\n  if (!setter) {\n    throw new Error(`Unknown GLSL uniform type ${info.type}`);\n  }\n  return setter.bind(null, gl, location);\n}\n\n// Basic checks of uniform values without knowledge of program\n// To facilitate early detection of e.g. undefined values in JavaScript\nexport function checkUniformValues(uniforms, source) {\n  for (const uniformName in uniforms) {\n    const value = uniforms[uniformName];\n    if (!checkUniformValue(value)) {\n      // Add space to source\n      source = source ? `${source} ` : '';\n      // Value could be unprintable so write the object on console\n      console.error(`${source} Bad uniform ${uniformName}`, value); // eslint-disable-line\n      /* eslint-enable no-console */\n      throw new Error(`${source} Bad uniform ${uniformName}`);\n    }\n  }\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  let ok = true;\n\n  // Test for texture (for sampler uniforms)\n  // WebGL2: if (value instanceof Texture || value instanceof Sampler) {\n  if (value instanceof Texture) {\n    ok = true;\n  // Check that every element in array is a number, and at least 1 element\n  } else if (Array.isArray(value)) {\n    for (const element of value) {\n      if (!isFinite(element)) {\n        ok = false;\n      }\n    }\n    ok = ok && (value.length > 0);\n  // Typed arrays can only contain numbers, but check length\n  } else if (ArrayBuffer.isView(value)) {\n    ok = value.length > 0;\n  // Check that single value is a number\n  } else if (!isFinite(value)) {\n    ok = false;\n  }\n\n  return ok;\n}\n\n// Prepares a table suitable for console.table\n/* eslint-disable max-statements */\nexport function getUniformsTable({\n  header = 'Uniforms',\n  program,\n  uniforms\n} = {}) {\n  assert(program);\n\n  const uniformLocations = program._uniformSetters;\n  const table = {[header]: {}};\n\n  // Add program's provided uniforms\n  for (const uniformName in uniformLocations) {\n    const uniform = uniforms[uniformName];\n    if (uniform !== undefined) {\n      table[uniformName] = {\n        Type: uniform,\n        Value: formatValue(uniform)\n      };\n    }\n  }\n\n  // Add program's unprovided uniforms\n  for (const uniformName in uniformLocations) {\n    const uniform = uniforms[uniformName];\n    if (uniform === undefined) {\n      table[uniformName] = {\n        Type: 'NOT PROVIDED',\n        Value: 'N/A'\n      };\n    }\n  }\n\n  const unusedTable = {};\n  let unusedCount = 0;\n\n  // List any unused uniforms\n  for (const uniformName in uniforms) {\n    const uniform = uniforms[uniformName];\n    if (!table[uniformName]) {\n      unusedCount++;\n      unusedTable[uniformName] = {\n        Type: `NOT USED: ${uniform}`,\n        Value: formatValue(uniform)\n      };\n    }\n  }\n\n  return {table, unusedTable, unusedCount};\n}\n"]}